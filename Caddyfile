{
  email admin1@xuniverz.com
}

astrooverz.com, www.astrooverz.com {
  encode zstd gzip

  @api path /api* /health /healthz
  handle @api {
    reverse_proxy backend:8000 {
      health_uri /healthz
      health_interval 30s
    }
  }

  # all other requests hit the frontend
  handle {
    reverse_proxy frontend:80
  }
}

api.astrooverz.com {
  encode zstd gzip
  reverse_proxy backend:8000 {
    health_uri /healthz
    health_interval 30s
  }
}

# Local development configuration
localhost, 127.0.0.1 {
  encode zstd gzip

  @api path /api* /health /healthz
  handle @api {
    reverse_proxy backend:8000 {
      health_uri /healthz
      health_interval 30s
    }
  }

  # all other requests hit the frontend
  handle {
    reverse_proxy frontend:80
  }
}

# Development configuration (fallback)
:80, :443 {
  encode zstd gzip

  @api path /api* /health /healthz
  handle @api {
    reverse_proxy backend:8000 {
      health_uri /healthz
      health_interval 30s
    }
  }

  # all other requests hit the frontend
  handle {
    reverse_proxy frontend:80
  }
}